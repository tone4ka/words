/**
 * Преобразует строку в безопасную для URL форму
 * Заменяет недопустимые символы на безопасные альтернативы
 */
export const encodeUrlSafe = (str: string): string => {
  return str
    .replace(/[<>:"/\\|?*]/g, "_") // Заменяем недопустимые символы на подчеркивание
    .replace(/\s+/g, "-") // Заменяем пробелы на дефисы
    .replace(/[^\w\-._~]/g, "_") // Заменяем остальные специальные символы на подчеркивание
    .toLowerCase();
};

/**
 * Декодирует URL-безопасную строку обратно в оригинальную
 * Возвращает оригинальное имя списка из закодированного URL
 */
export const decodeUrlSafe = (encodedStr: string): string => {
  // Поскольку мы можем потерять информацию при кодировании,
  // эта функция не может точно восстановить оригинал
  // Поэтому лучше использовать поиск по базе данных
  return encodedStr.replace(/-/g, " ").replace(/_/g, " ");
};
